{% assign current_lang = page.lang | default: site.default_lang %}
{% assign t = site.data.translations[current_lang] %}
{% assign lang_prefix = "/" | append: current_lang %}
{% assign lang_posts = site.articles | where: "lang", current_lang | where_exp: "p", "p.hidden != true" | sort: "date" | reverse %}

<div class="mt-10 grid gap-10 lg:grid-cols-[minmax(0,1fr)_240px]">
  <section id="posts">
    {% if lang_posts.size == 0 %}
    <div class="rounded-3xl border border-dashed border-slate-300 dark:border-slate-700 bg-slate-50/80 dark:bg-slate-800/50 p-10 text-center text-slate-500 dark:text-slate-400">
      {{ t.post.no_entries }}
    </div>
    {% else %}
    <ul class="space-y-10">
      {% for post in lang_posts %}
      <li class="border-b border-slate-200 dark:border-slate-800 pb-10 last:border-b-0">
        <div class="flex flex-wrap items-center gap-4 text-xs uppercase text-slate-400 dark:text-slate-500">
          {% if post.category %}
          <a href="/categories/{{ post.category | downcase }}/" class="hover:text-[#fc4d50] transition-colors">{{ post.category }}</a>
          {% else %}
          <span>{{ t.site.title }}</span>
          {% endif %}
          <span class="h-3 w-px bg-slate-200 dark:bg-slate-700" aria-hidden="true"></span>
          <time datetime="{{ post.date | date_to_xmlschema }}">{{ post.date | date: "%Y-%m-%d" }}</time>
        </div>
        <h2 class="mt-3 text-3xl font-semibold leading-tight text-slate-900 dark:text-slate-100">
          <a class="transition hover:text-[#fc4d50]" href="{{ post.url | relative_url }}">
            {{ post.title }}
          </a>
        </h2>
        <p class="mt-3 text-base text-slate-600 dark:text-slate-400">{{ post.description }}</p>
        {% if post.tags.size > 0 %}
        <div class="mt-3 flex flex-wrap gap-2">
          {% for tag in post.tags %}
          <a href="/tags/{{ tag }}/" class="rounded-full bg-slate-100 dark:bg-slate-800 px-2.5 py-0.5 text-xs font-medium text-slate-600 dark:text-slate-400 transition hover:bg-[#fc4d50] hover:text-white">#{{ tag }}</a>
          {% endfor %}
        </div>
        {% endif %}
        <div class="mt-4 flex flex-wrap items-center gap-4 text-sm text-slate-500 dark:text-slate-400">
          <a class="inline-flex items-center gap-2 font-semibold text-[#fc4d50]" href="{{ post.url | relative_url }}">
            {{ t.post.read_article }} <span aria-hidden="true">&rarr;</span>
          </a>
        </div>
      </li>
      {% endfor %}
    </ul>
    {% endif %}

    <p class="mt-8 text-sm text-slate-400 dark:text-slate-500">
      {{ lang_posts.size }} {{ t.pagination.notes }}
    </p>
  </section>

  {% include sidebar.html %}
</div>
